{
  "benchmark": "pretrade_marginal_im_scaling",
  "description": "AADC gradient-based marginal IM vs naive full recalculation",
  "timestamp": "2026-01-30T10:11:51",
  "num_threads": 8,
  "results": [
    {
      "num_trades": 1000,
      "num_counterparties": 10,
      "num_risk_factors": 50,
      "num_queries": 50,
      "num_threads": 8,
      "total_im": 1206033784362.6196,
      "crif_precompute_s": 33.989705074578524,
      "gradient_precompute_ms": 3.8686003535985947,
      "aadc_query_avg_ms": 0.006607957184314728,
      "naive_query_avg_ms": 16.103215515613556,
      "speedup_per_query": 2436.9430773307176,
      "aadc_amortized_ms": 4.198998212814331,
      "naive_total_ms": 805.1607757806778,
      "speedup_amortized": 191.7506831328294,
      "break_even_queries": 1,
      "single_simm_eval_ms": 1.6103215515613556,
      "queries_per_second_aadc": 151332.69966907392,
      "queries_per_second_naive": 62.09939865925582,
      "description": "1K trades, 10 counterparties"
    },
    {
      "num_trades": 5000,
      "num_counterparties": 20,
      "num_risk_factors": 50,
      "num_queries": 50,
      "num_threads": 8,
      "total_im": 4110769850030.633,
      "crif_precompute_s": 41.27823745086789,
      "gradient_precompute_ms": 7.083520293235779,
      "aadc_query_avg_ms": 0.005367100238800049,
      "naive_query_avg_ms": 32.90531039237976,
      "speedup_per_query": 6130.928979954468,
      "aadc_amortized_ms": 7.351875305175781,
      "naive_total_ms": 1645.265519618988,
      "speedup_amortized": 223.78855071993775,
      "break_even_queries": 1,
      "single_simm_eval_ms": 1.645265519618988,
      "queries_per_second_aadc": 186320.35093564328,
      "queries_per_second_naive": 30.39023148772913,
      "description": "5K trades, 20 counterparties"
    },
    {
      "num_trades": 10000,
      "num_counterparties": 20,
      "num_risk_factors": 50,
      "num_queries": 50,
      "num_threads": 8,
      "total_im": 6728804722193.339,
      "crif_precompute_s": 49.60310522839427,
      "gradient_precompute_ms": 6.36490061879158,
      "aadc_query_avg_ms": 0.005269236862659454,
      "naive_query_avg_ms": 25.504574179649353,
      "speedup_per_query": 4840.278553501361,
      "aadc_amortized_ms": 6.628362461924553,
      "naive_total_ms": 1275.2287089824677,
      "speedup_amortized": 192.38970655388744,
      "break_even_queries": 1,
      "single_simm_eval_ms": 1.2752287089824677,
      "queries_per_second_aadc": 189780.8024320407,
      "queries_per_second_naive": 39.20865304224218,
      "description": "10K trades, 20 counterparties"
    },
    {
      "num_trades": 50000,
      "num_counterparties": 20,
      "num_risk_factors": 50,
      "num_queries": 50,
      "num_threads": 8,
      "total_im": 18877440220815.29,
      "crif_precompute_s": 120.60889882221818,
      "gradient_precompute_ms": 22.580744698643684,
      "aadc_query_avg_ms": 0.005776956677436829,
      "naive_query_avg_ms": 26.25005692243576,
      "speedup_per_query": 4543.9248358848035,
      "aadc_amortized_ms": 22.869592532515526,
      "naive_total_ms": 1312.502846121788,
      "speedup_amortized": 57.390740314052294,
      "break_even_queries": 1,
      "single_simm_eval_ms": 1.312502846121788,
      "queries_per_second_aadc": 173101.5231437894,
      "queries_per_second_naive": 38.095155486893674,
      "description": "50K trades, 20 counterparties"
    },
    {
      "num_trades": 100000,
      "num_counterparties": 20,
      "num_risk_factors": 50,
      "num_queries": 50,
      "num_threads": 8,
      "total_im": 35770339642680.82,
      "crif_precompute_s": 206.8947201203555,
      "gradient_precompute_ms": 36.37332282960415,
      "aadc_query_avg_ms": 0.006106831133365631,
      "naive_query_avg_ms": 26.78058296442032,
      "speedup_per_query": 4385.34853503651,
      "aadc_amortized_ms": 36.67866438627243,
      "naive_total_ms": 1339.029148221016,
      "speedup_amortized": 36.50703128443708,
      "break_even_queries": 2,
      "single_simm_eval_ms": 1.339029148221016,
      "queries_per_second_aadc": 163751.0483196994,
      "queries_per_second_naive": 37.340486625274835,
      "description": "100K trades, 20 counterparties"
    }
  ]
}