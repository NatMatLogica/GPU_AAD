{
  "benchmark": "whatif_margin_attribution_scaling",
  "description": "AADC gradient attribution vs naive leave-one-out",
  "timestamp": "2026-01-30T10:30:36",
  "num_threads": 8,
  "results": [
    {
      "num_trades": 100,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 111083221504.28061,
      "crif_precompute_s": 10.661261344328523,
      "smatrix_build_s": 0.38366733491420746,
      "aadc_gradient_ms": 2.3419825981060662,
      "aadc_attribution_ms": 0.004732981324195862,
      "aadc_total_ms": 2.346715579430262,
      "naive_per_trade_ms": 1.5416121110320091,
      "naive_total_ms": 154.1612111032009,
      "speedup": 65.69232865476963,
      "euler_error_pct": 3.0219987755942424e-13,
      "num_additive_trades": 43,
      "num_reducing_trades": 57,
      "top5_estimated_saving": 99259157118.3836,
      "top5_actual_saving": 88826152294.39221,
      "single_simm_eval_ms": 1.5593646094202995,
      "description": "100 trades"
    },
    {
      "num_trades": 500,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 219742719197.91986,
      "crif_precompute_s": 28.03875240124762,
      "smatrix_build_s": 1.5800643116235733,
      "aadc_gradient_ms": 3.1345567355553308,
      "aadc_attribution_ms": 0.005587935447692871,
      "aadc_total_ms": 3.1401446710030236,
      "naive_per_trade_ms": 1.9025864079594612,
      "naive_total_ms": 951.2932039797306,
      "speedup": 302.94566131434607,
      "euler_error_pct": 6.388419142504581e-13,
      "num_additive_trades": 274,
      "num_reducing_trades": 226,
      "top5_estimated_saving": -211120369452.5066,
      "top5_actual_saving": -220902564996.04944,
      "single_simm_eval_ms": 1.9359944388270378,
      "description": "500 trades"
    },
    {
      "num_trades": 1000,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 261188459045.4377,
      "crif_precompute_s": 33.734688472002745,
      "smatrix_build_s": 3.087659427896142,
      "aadc_gradient_ms": 2.830474947889646,
      "aadc_attribution_ms": 0.005934387445449829,
      "aadc_total_ms": 2.836409335335096,
      "naive_per_trade_ms": 2.066477108746767,
      "naive_total_ms": 2066.477108746767,
      "speedup": 728.5539089874105,
      "euler_error_pct": 7.010473181670941e-14,
      "num_additive_trades": 526,
      "num_reducing_trades": 474,
      "top5_estimated_saving": -52597310013.021774,
      "top5_actual_saving": -55370524258.59714,
      "single_simm_eval_ms": 2.2681578993797302,
      "description": "1K trades"
    },
    {
      "num_trades": 5000,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 458445268867.9979,
      "crif_precompute_s": 41.631161572411656,
      "smatrix_build_s": 14.57706174813211,
      "aadc_gradient_ms": 2.2727480779091516,
      "aadc_attribution_ms": 0.00525452196598053,
      "aadc_total_ms": 2.278002599875132,
      "naive_per_trade_ms": 1.249268278479576,
      "naive_total_ms": 6246.341392397881,
      "speedup": 2742.025576590769,
      "euler_error_pct": 6.656754949255906e-13,
      "num_additive_trades": 2472,
      "num_reducing_trades": 2528,
      "top5_estimated_saving": 141899539485.92853,
      "top5_actual_saving": -28855079759.898743,
      "single_simm_eval_ms": 1.259508915245533,
      "description": "5K trades"
    },
    {
      "num_trades": 10000,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 2832096561868.3984,
      "crif_precompute_s": 49.57847858406603,
      "smatrix_build_s": 29.806347174569964,
      "aadc_gradient_ms": 4.057181999087334,
      "aadc_attribution_ms": 0.005375593900680542,
      "aadc_total_ms": 4.062557592988014,
      "naive_per_trade_ms": 1.9005916081368923,
      "naive_total_ms": 19005.916081368923,
      "speedup": 4678.313019899875,
      "euler_error_pct": 4.82747487641465e-13,
      "num_additive_trades": 4956,
      "num_reducing_trades": 5044,
      "top5_estimated_saving": -406401868383.78,
      "top5_actual_saving": -410300833890.9746,
      "single_simm_eval_ms": 1.9800432026386263,
      "description": "10K trades"
    },
    {
      "num_trades": 50000,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 15796668080782.865,
      "crif_precompute_s": 119.25439881160855,
      "smatrix_build_s": 150.46918045543134,
      "aadc_gradient_ms": 7.347349698344867,
      "aadc_attribution_ms": 0.005641952157020569,
      "aadc_total_ms": 7.352991650501887,
      "naive_per_trade_ms": 1.5260051004588604,
      "naive_total_ms": 76300.25502294302,
      "speedup": 10376.763452156927,
      "euler_error_pct": 2.6953864436638763e-12,
      "num_additive_trades": 25061,
      "num_reducing_trades": 24939,
      "top5_estimated_saving": -418217551005.3401,
      "top5_actual_saving": -418696281448.1035,
      "single_simm_eval_ms": 1.7743021249771118,
      "description": "50K trades"
    },
    {
      "num_trades": 100000,
      "num_risk_factors": 50,
      "num_threads": 8,
      "total_im": 31081005428620.867,
      "crif_precompute_s": 209.71595840156078,
      "smatrix_build_s": 401.28777308389544,
      "aadc_gradient_ms": 73.25781447192033,
      "aadc_attribution_ms": 0.011602416634559631,
      "aadc_total_ms": 73.26941688855489,
      "naive_per_trade_ms": 11.443769745528698,
      "naive_total_ms": 1144376.9745528698,
      "speedup": 15618.753678543717,
      "euler_error_pct": 6.686157578693911e-12,
      "num_additive_trades": 50000,
      "num_reducing_trades": 50000,
      "top5_estimated_saving": -417813866139.4468,
      "top5_actual_saving": -418065665700.7617,
      "single_simm_eval_ms": 12.584591656923294,
      "description": "100K trades"
    }
  ]
}